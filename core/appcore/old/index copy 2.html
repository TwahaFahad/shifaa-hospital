{% extends 'base.html' %}


{% block content %} 



<div class="grid grid-cols-1 gap-4 sm:gap-5 lg:gap-6 mt-5">

    
    
    <div>

      <div class="flex items-center justify-between">

 
        <button
            class="btn min-w-[7rem] rounded-full bg-primary font-medium text-white hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
            onclick="toggleModal('modal-background')"
        >
            Add Patient
        </button>


       </div> 

       <div class="flex items-center justify-between">
        <h2
          class="line-clamp-1 text-base font-medium tracking-wide text-slate-700 dark:text-navy-100"
        >
          Patients
        </h2>
        <div class="flex">
          <div class="flex items-center" x-data="{isInputActive:false}">
            <label class="block">
              <input
                x-effect="isInputActive === true && $nextTick(() => { $el.focus()});"
                :class="isInputActive ? 'w-32 lg:w-48' : 'w-0'"
                class="form-input bg-transparent px-1 text-right transition-all duration-100 placeholder:text-slate-500 dark:placeholder:text-navy-200"
                placeholder="Search here..."
                type="text"
              />
            </label>
            <button
              @click="isInputActive = !isInputActive"
              class="btn h-8 w-8 rounded-full p-0 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4.5 w-4.5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                />
              </svg>
            </button>
          </div>

        </div>
      </div>

      <div class="card mt-3">

        <div class="is-scrollbar-hidden min-w-full overflow-x-auto">
            <table class="is-hoverable w-full text-left">
                <thead>
                <tr>
                    <th
                    class="whitespace-nowrap rounded-tl-lg bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                    >
                    Name
                    </th>
                    <th
                    class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                    >
                    DOB
                    </th>
                    <th
                    class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                    >
                    Gender
                    </th>
                    <th
                    class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                    >
                    Diagnosis
                    </th>
                    <th
                    class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                    >
                    Referral
                    </th>
                    <th
                    class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                    >
                    Diagnostics
                    </th>
                    <th
                    class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                    >
                    Medical Hostory
                    </th>
                    <th
                    class="whitespace-nowrap rounded-tr-lg bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                    >
                    Action
                    </th>
                </tr>
                </thead>
                <tbody id="patient-list">

                   
                </tbody>
            </table>
            </div>

        
        <div class="flex flex-col justify-between space-y-4 px-4 py-4 sm:flex-row sm:items-center sm:space-y-0 sm:px-5">
            <div class="flex items-center space-x-2 text-xs+">
                <span>Show</span>
                <label class="block">
                <select
                    class="form-select rounded-full border border-slate-300 bg-white px-2 py-1 pr-6 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:bg-navy-700 dark:hover:border-navy-400 dark:focus:border-accent"
                >
                    <option>10</option>
                    <option>30</option>
                    <option>50</option>
                </select>
                </label>
                <span>entries</span>
            </div>

            <ol class="pagination">
                <li class="rounded-l-lg bg-slate-150 dark:bg-navy-500">
                <a
                    href="#"
                    class="flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:text-navy-200 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                >
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-4 w-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                    >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M15 19l-7-7 7-7"
                    />
                    </svg>
                </a>
                </li>
                <li class="bg-slate-150 dark:bg-navy-500">
                <a
                    href="#"
                    class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                    >1</a
                >
                </li>
                <li class="bg-slate-150 dark:bg-navy-500">
                <a
                    href="#"
                    class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg bg-primary px-3 leading-tight text-white transition-colors hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                    >2</a
                >
                </li>
                <li class="bg-slate-150 dark:bg-navy-500">
                <a
                    href="#"
                    class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                    >3</a
                >
                </li>
                <li class="bg-slate-150 dark:bg-navy-500">
                <a
                    href="#"
                    class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                    >4</a
                >
                </li>
                <li class="bg-slate-150 dark:bg-navy-500">
                <a
                    href="#"
                    class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                    >5</a
                >
                </li>
                <li class="rounded-r-lg bg-slate-150 dark:bg-navy-500">
                <a
                    href="#"
                    class="flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:text-navy-200 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                >
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-4 w-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5l7 7-7 7"
                    />
                    </svg>
                </a>
                </li>
            </ol>

            <div class="text-xs+">1 - 10 of 10 entries</div>
            </div>
      </div>


    </div>

        
    <div>

            <div class="flex items-center justify-between">
    
                <button id="view-referrals-btn"
                class="btn min-w-[7rem] rounded-full bg-primary font-medium text-white hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
               
            >
                Refresh
            </button>
      
             </div> 
      
             <div class="flex items-center justify-between">
              <h2
                class="line-clamp-1 text-base font-medium tracking-wide text-slate-700 dark:text-navy-100"
              >
                Referrals
              </h2>
              <div class="flex">
                <div class="flex items-center" x-data="{isInputActive:false}">
                  <label class="block">
                    <input
                      x-effect="isInputActive === true && $nextTick(() => { $el.focus()});"
                      :class="isInputActive ? 'w-32 lg:w-48' : 'w-0'"
                      class="form-input bg-transparent px-1 text-right transition-all duration-100 placeholder:text-slate-500 dark:placeholder:text-navy-200"
                      placeholder="Search here..."
                      type="text"
                    />
                  </label>
                  <button
                    @click="isInputActive = !isInputActive"
                    class="btn h-8 w-8 rounded-full p-0 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-4.5 w-4.5"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="1.5"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                      />
                    </svg>
                  </button>
                </div>
      
              </div>
            </div>
      
            <div class="card mt-3">
      
              <div class="is-scrollbar-hidden min-w-full overflow-x-auto">
                  <table id="referrals-table" class="is-hoverable w-full text-left">
                      <thead>
                      <tr>
                          <th
                          class="whitespace-nowrap rounded-tl-lg bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                          >
                          Patient Name
                          </th>
                          <th
                          class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                          >
                          Referred From
                          </th>
                          <th
                          class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                          >
                          Referred To
                          </th>
                          <th
                          class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                          >
                          Referral Reason
                          </th>
                          <th
                          class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                          >
                          Referral Date
                          </th>
                          <th
                          class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                          >
                          Status
                          </th>
                      </tr>
                      </thead>
                      <tbody>
      
                         
                      </tbody>
                  </table>
                  </div>
      
              
              <div class="flex flex-col justify-between space-y-4 px-4 py-4 sm:flex-row sm:items-center sm:space-y-0 sm:px-5">
                  <div class="flex items-center space-x-2 text-xs+">
                      <span>Show</span>
                      <label class="block">
                      <select
                          class="form-select rounded-full border border-slate-300 bg-white px-2 py-1 pr-6 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:bg-navy-700 dark:hover:border-navy-400 dark:focus:border-accent"
                      >
                          <option>10</option>
                          <option>30</option>
                          <option>50</option>
                      </select>
                      </label>
                      <span>entries</span>
                  </div>
      
                  <ol class="pagination">
                      <li class="rounded-l-lg bg-slate-150 dark:bg-navy-500">
                      <a
                          href="#"
                          class="flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:text-navy-200 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                      >
                          <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-4 w-4"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                          stroke-width="2"
                          >
                          <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="M15 19l-7-7 7-7"
                          />
                          </svg>
                      </a>
                      </li>
                      <li class="bg-slate-150 dark:bg-navy-500">
                      <a
                          href="#"
                          class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                          >1</a
                      >
                      </li>
                      <li class="bg-slate-150 dark:bg-navy-500">
                      <a
                          href="#"
                          class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg bg-primary px-3 leading-tight text-white transition-colors hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                          >2</a
                      >
                      </li>
                      <li class="bg-slate-150 dark:bg-navy-500">
                      <a
                          href="#"
                          class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                          >3</a
                      >
                      </li>
                      <li class="bg-slate-150 dark:bg-navy-500">
                      <a
                          href="#"
                          class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                          >4</a
                      >
                      </li>
                      <li class="bg-slate-150 dark:bg-navy-500">
                      <a
                          href="#"
                          class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                          >5</a
                      >
                      </li>
                      <li class="rounded-r-lg bg-slate-150 dark:bg-navy-500">
                      <a
                          href="#"
                          class="flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:text-navy-200 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                      >
                          <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="h-4 w-4"
                          fill="none"
                          viewBox="0 0 24 24"
                          stroke="currentColor"
                          >
                          <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M9 5l7 7-7 7"
                          />
                          </svg>
                      </a>
                      </li>
                  </ol>
      
                  <div class="text-xs+">1 - 10 of 10 entries</div>
                  </div>
            </div>
      
      
    </div>


    <div>

        <div class="flex items-center justify-between">

  
  
         </div> 
  
         <div class="flex items-center justify-between">
          <h2
            class="line-clamp-1 text-base font-medium tracking-wide text-slate-700 dark:text-navy-100"
          >
            Equipments
          </h2>
          <div class="flex">
            <div class="flex items-center" x-data="{isInputActive:false}">
              <label class="block">
                <input
                  x-effect="isInputActive === true && $nextTick(() => { $el.focus()});"
                  :class="isInputActive ? 'w-32 lg:w-48' : 'w-0'"
                  class="form-input bg-transparent px-1 text-right transition-all duration-100 placeholder:text-slate-500 dark:placeholder:text-navy-200"
                  placeholder="Search here..."
                  type="text"
                />
              </label>
              <button
                @click="isInputActive = !isInputActive"
                class="btn h-8 w-8 rounded-full p-0 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4.5 w-4.5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="1.5"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                  />
                </svg>
              </button>
            </div>
  
          </div>
        </div>
  
        <div class="card mt-3">
  
          <div class="is-scrollbar-hidden min-w-full overflow-x-auto">
              <table  class="is-hoverable w-full text-left">
                  <thead>
                  <tr>
                      <th
                      class="whitespace-nowrap rounded-tl-lg bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                      >
                      Equipment Name
                      </th>
                      <th
                      class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                      >
                      Function
                      </th>
                      <th
                      class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                      >
                      Action
                      </th>
                  </tr>
                  </thead>
                  <tbody id="equipment-list">
  
                     
                  </tbody>
              </table>
              </div>
  
          
          <div class="flex flex-col justify-between space-y-4 px-4 py-4 sm:flex-row sm:items-center sm:space-y-0 sm:px-5">
              <div class="flex items-center space-x-2 text-xs+">
                  <span>Show</span>
                  <label class="block">
                  <select
                      class="form-select rounded-full border border-slate-300 bg-white px-2 py-1 pr-6 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:bg-navy-700 dark:hover:border-navy-400 dark:focus:border-accent"
                  >
                      <option>10</option>
                      <option>30</option>
                      <option>50</option>
                  </select>
                  </label>
                  <span>entries</span>
              </div>
  
              <ol class="pagination">
                  <li class="rounded-l-lg bg-slate-150 dark:bg-navy-500">
                  <a
                      href="#"
                      class="flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:text-navy-200 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                  >
                      <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-4 w-4"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="2"
                      >
                      <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M15 19l-7-7 7-7"
                      />
                      </svg>
                  </a>
                  </li>
                  <li class="bg-slate-150 dark:bg-navy-500">
                  <a
                      href="#"
                      class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                      >1</a
                  >
                  </li>
                  <li class="bg-slate-150 dark:bg-navy-500">
                  <a
                      href="#"
                      class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg bg-primary px-3 leading-tight text-white transition-colors hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                      >2</a
                  >
                  </li>
                  <li class="bg-slate-150 dark:bg-navy-500">
                  <a
                      href="#"
                      class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                      >3</a
                  >
                  </li>
                  <li class="bg-slate-150 dark:bg-navy-500">
                  <a
                      href="#"
                      class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                      >4</a
                  >
                  </li>
                  <li class="bg-slate-150 dark:bg-navy-500">
                  <a
                      href="#"
                      class="flex h-8 min-w-[2rem] items-center justify-center rounded-lg px-3 leading-tight transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                      >5</a
                  >
                  </li>
                  <li class="rounded-r-lg bg-slate-150 dark:bg-navy-500">
                  <a
                      href="#"
                      class="flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 transition-colors hover:bg-slate-300 focus:bg-slate-300 active:bg-slate-300/80 dark:text-navy-200 dark:hover:bg-navy-450 dark:focus:bg-navy-450 dark:active:bg-navy-450/90"
                  >
                      <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-4 w-4"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      >
                      <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M9 5l7 7-7 7"
                      />
                      </svg>
                  </a>
                  </li>
              </ol>
  
              <div class="text-xs+">1 - 10 of 10 entries</div>
              </div>
        </div>
  
  
</div>





</div> 






 


    <div id="delete-patient-section"></div>





    <div id="delete-equipment-section"></div>




  


<!-- Modal Background -->
<div
    id="modal-background"
    class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden"
    onclick="outsideClick(event, 'modal-background')"
>
    <!-- Modal Container -->
    <div class="relative bg-white dark:bg-navy-800 rounded-lg shadow-lg p-6 max-w-lg w-full" onclick="event.stopPropagation()">
        <!-- Modal Title -->
        <h2 class="text-2xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-4">
            Add Patient
        </h2>
        


        <!-- Form Container -->
        <div class="mt-4 space-y-4">
            <form id="add-patient-form">
                <label class="block">
                    <span>First Name:</span>
                    <input
                        id="first_name"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="First Name"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Last Name:</span>
                    <input
                        id="last_name"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Last Name"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Date of Birth:</span>
                    <input
                        id="dob"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        type="date"
                        required
                    />
                </label>
                <label class="block">
                    <span>Select Gender</span>
                    <select
                        id="gender"
                        required
                        class="form-select mt-1.5 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:bg-navy-700 dark:hover:border-navy-400 dark:focus:border-accent"
                    >
                        <option value="">Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </label>
                <label class="block">
                    <span>Contact Info:</span>
                    <input
                        id="contact_info"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Contact Info"
                        type="text"
                        required
                    />
                </label>


                <div class="space-x-2 text-right">
                    <button onclick="toggleModal('modal-background')" 
                    class="btn min-w-[7rem] rounded-full border border-slate-300 font-medium text-slate-800 hover:bg-slate-150 focus:bg-slate-150 active:bg-slate-150/80 dark:border-navy-450 dark:text-navy-50 dark:hover:bg-navy-500 dark:focus:bg-navy-500 dark:active:bg-navy-500/90"
                    >
                    Cancel
                    </button>
                    <button type="submit" 
                    class="btn min-w-[7rem] rounded-full bg-primary font-medium text-white hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                    >
                   Submit
                </button>
                </div>

            </form>
        </div>
    </div>
</div>


<div
    id="modal-background2"
    class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden"
    onclick="outsideClick(event, 'modal-background2')"
>
    <!-- Modal Container -->
    <div class="relative bg-white dark:bg-navy-800 rounded-lg shadow-lg p-6 max-w-lg w-full" onclick="event.stopPropagation()">
        <!-- Modal Title -->
        <h2 class="text-2xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-4">
            Edit Patient
        </h2>
        


        <!-- Form Container -->
        <div class="mt-4 space-y-4">
            <form id="update-patient-form">
                <input type="hidden" id="update_patient_id">
                <label class="block">
                    <span>First Name:</span>
                    <input
                        id="update_first_name"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="First Name"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Last Name:</span>
                    <input
                        id="update_last_name"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Last Name"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Date of Birth:</span>
                    <input
                        id="update_dob"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        type="date"
                        required
                    />
                </label>
                <label class="block">
                    <span>Select Gender</span>
                    <select
                        id="update_gender"
                        required
                        class="form-select mt-1.5 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:bg-navy-700 dark:hover:border-navy-400 dark:focus:border-accent"
                    >
                        <option value="">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </label>
                <label class="block">
                    <span>Contact Info:</span>
                    <input
                        id="update_contact_info"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Contact Info"
                        type="text"
                        required
                    />
                </label>


                <div class="space-x-2 text-right">
                    <button onclick="toggleModal('modal-background2')" 
                    class="btn min-w-[7rem] rounded-full border border-slate-300 font-medium text-slate-800 hover:bg-slate-150 focus:bg-slate-150 active:bg-slate-150/80 dark:border-navy-450 dark:text-navy-50 dark:hover:bg-navy-500 dark:focus:bg-navy-500 dark:active:bg-navy-500/90"
                    >
                    Cancel
                    </button>

                    <button type="submit" 
                    class="btn min-w-[7rem] rounded-full bg-primary font-medium text-white hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                    >
                   Submit
                </button>
                </div>

            </form>
        </div>
    </div>
</div>



<div
    id="modal-background3"
    class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden"
    onclick="outsideClick(event, 'modal-background3')"
>
    <!-- Modal Container -->
    <div class="relative bg-white dark:bg-navy-800 rounded-lg shadow-lg p-6 max-w-lg w-full" onclick="event.stopPropagation()">
        <!-- Modal Title -->
        <h2 class="text-2xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-4">
            Edit Equipment
        </h2>
        


        <!-- Form Container -->
        <div class="mt-4 space-y-4">
            <form id="update-equipment-form">
                <input type="hidden" id="update_equipment_id">
                <label class="block">
                    <span>Equipment Name:</span>
                    <input
                        id="update_equipment_name"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Equipment Name"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Function:</span>
                    <input
                        id="update_description"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Function"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Available:</span>
                    <select
                        id="update_available"
                        required
                        class="form-select mt-1.5 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:bg-navy-700 dark:hover:border-navy-400 dark:focus:border-accent"
                    >
                    <option value="true">Yes</option>
                    <option value="false">No</option>
                    </select>
                </label>


                <div class="space-x-2 text-right">
                    <button type="submit" 
                    class="btn min-w-[7rem] rounded-full bg-primary font-medium text-white hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                    >
                    Update Equipment
                </button>
                </div>

            </form>
        </div>
    </div>
</div>




<div
    id="modal-background4"
    class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden"
    onclick="outsideClick(event, 'modal-background4')"
>
    <!-- Modal Container -->
    <div class="relative bg-white dark:bg-navy-800 rounded-lg shadow-lg p-6 max-w-lg w-full" onclick="event.stopPropagation()">
        <!-- Modal Title -->
        <h2 class="text-2xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-4">
            Refer a Patient
        </h2>
        


        <!-- Form Container -->
        <div class="mt-4 space-y-4">
            <form id="referral-form">
                <input type="hidden" id="referral_patient_id">
                <label class="block">
                    <span>Referred To:</span>
                    <input
                        id="referred_to"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Referred To"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Referral Reason:</span>
                    <input
                        id="referral_reason"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Referral Reason"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Referral Date:</span>
                    <input
                        id="referral_date"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        type="date"
                        required
                    />
                </label>


                <div class="space-x-2 text-right">
                    <button onclick="toggleModal('modal-background4')" 
                    class="btn min-w-[7rem] rounded-full border border-slate-300 font-medium text-slate-800 hover:bg-slate-150 focus:bg-slate-150 active:bg-slate-150/80 dark:border-navy-450 dark:text-navy-50 dark:hover:bg-navy-500 dark:focus:bg-navy-500 dark:active:bg-navy-500/90"
                    >
                    Cancel
                    </button>

                    <button type="submit" 
                    class="btn min-w-[7rem] rounded-full bg-primary font-medium text-white hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                    >
                   Submit
                </button>
                </div>

            </form>
        </div>
    </div>
</div>


<div
    id="modal-background5"
    class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden"
    onclick="outsideClick(event, 'modal-background5')">
    <!-- Modal Container -->
    <div class="relative bg-white dark:bg-navy-800 rounded-lg shadow-lg p-6 max-w-lg w-full" onclick="event.stopPropagation()">
        <!-- Modal Title -->
        <h2 class="text-2xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-4">
            Diagnose a Patient
        </h2>
        


        <!-- Form Container -->
        <div class="mt-4 space-y-4">
            <form id="diagnose-form">
                <input type="hidden" id="diagnose_patient_id">
                <label class="block">
                    <span>Diagnostic Type:</span>
                    <input
                        id="diagnostic_type"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Diagnostic Type"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Result:</span>
                    <input
                        id="diagnostic_result"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Result"
                        type="text"
                        required
                    />
                </label>
                <label class="block">
                    <span>Date Taken:</span>
                    <input
                        id="diagnostic_date_taken"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        type="date"
                        required
                    />
                </label>
                
                <label class="block">
                    <span>Comment:</span>
                    <input
                        id="diagnostic_notes"
                        class="form-input mt-1.5 w-full rounded-lg border border-slate-300 bg-transparent px-3 py-2 placeholder:text-slate-400/70 hover:border-slate-400 focus:border-primary dark:border-navy-450 dark:hover:border-navy-400 dark:focus:border-accent"
                        placeholder="Comment"
                        type="text"
                        required
                    />
                </label>

                <div class="space-x-2 text-right">
                    <button onclick="toggleModal('modal-background5')" 
                    class="btn min-w-[7rem] rounded-full border border-slate-300 font-medium text-slate-800 hover:bg-slate-150 focus:bg-slate-150 active:bg-slate-150/80 dark:border-navy-450 dark:text-navy-50 dark:hover:bg-navy-500 dark:focus:bg-navy-500 dark:active:bg-navy-500/90"
                    >
                    Cancel
                    </button>

                    <button type="submit" 
                    class="btn min-w-[7rem] rounded-full bg-primary font-medium text-white hover:bg-primary-focus focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                    >
                   Submit
                </button>
                </div>

            </form>
        </div>
    </div>
</div>


<div
    id="modal-background6"
    class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden"
    onclick="outsideClick(event, 'modal-background6')">
    <!-- Modal Container -->
    <div class="relative bg-white dark:bg-navy-800 rounded-lg shadow-lg p-6 max-w-lg w-full" onclick="event.stopPropagation()">
        <!-- Modal Title -->
        <h2 class="text-2xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-4">
            Diagnostics History
        </h2>
        


        <div class="card mt-3">

            <div class="is-scrollbar-hidden min-w-full overflow-x-auto">
                <table  class="is-hoverable w-full text-left">
                    <thead>
                    <tr>
                        <th
                        class="whitespace-nowrap rounded-tl-lg bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                        >
                        Diagnostic Type
                        </th>
                        <th
                        class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                        >
                        Result
                        </th>
                        <th
                        class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                        >
                        Date Taken
                        </th>
                    </tr>
                    </thead>
                    <tbody id="diagnostics-body">
      
                       
                    </tbody>
                </table>
                </div>
      
          </div>
    </div>
</div>


<div
    id="modal-background7"
    class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden"
    onclick="outsideClick(event, 'modal-background7')">
    <!-- Modal Container -->
    <div class="relative bg-white dark:bg-navy-800 rounded-lg shadow-lg p-6 max-w-lg w-full" onclick="event.stopPropagation()">
        <!-- Modal Title -->
        <h2 class="text-2xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-4">
            Medical History
        </h2>
        


        <div class="card mt-3">

            <div class="is-scrollbar-hidden min-w-full overflow-x-auto">
                <table  class="is-hoverable w-full text-left">
                    <thead>
                    <tr>
                        <th
                        class="whitespace-nowrap rounded-tl-lg bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                        >
                        Condition
                        </th>
                        <th
                        class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                        >
                        Treatment
                        </th>
                        <th
                        class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                        >
                        Start Date
                        </th>
                        <th
                        class="whitespace-nowrap bg-slate-200 px-4 py-3 font-semibold uppercase text-slate-800 dark:bg-navy-800 dark:text-navy-100 lg:px-5"
                        >
                        End Date
                        </th>
                    </tr>
                    </thead>
                    <tbody id="medicals-body">
      
                       
                    </tbody>
                </table>
                </div>
      
          </div>
    </div>
</div>




{% comment %} <div
    id="modal-background6"
    class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden"
    onclick="outsideClick(event, 'modal-background6')">
    <!-- Modal Container -->
    <div class="relative bg-white dark:bg-navy-800 rounded-lg shadow-lg p-6 max-w-lg w-full" onclick="event.stopPropagation()">

        


        <!-- Form Container -->
        <div class="mt-4 space-y-4">





            <div
              class="absolute inset-0 bg-slate-900/60 transition-opacity duration-300"

              x-transition:enter="ease-out"
              x-transition:enter-start="opacity-0"
              x-transition:enter-end="opacity-100"
              x-transition:leave="ease-in"
              x-transition:leave-start="opacity-100"
              x-transition:leave-end="opacity-0"
            ></div>
            <div 
            class="relative flex w-full max-w-2xl origin-bottom flex-col overflow-hidden rounded-lg bg-white transition-all duration-300 dark:bg-navy-700"
            x-transition:enter="easy-out"
            x-transition:enter-start="opacity-0 scale-95"
            x-transition:enter-end="opacity-100 scale-100"
            x-transition:leave="easy-in"
            x-transition:leave-start="opacity-100 scale-100"
            x-transition:leave-end="opacity-0 scale-95"
          >
            <div
              class="flex justify-between rounded-t-lg bg-slate-200 px-4 py-3 dark:bg-navy-800 sm:px-5"
            >
              <h3
                class="text-base font-medium text-slate-700 dark:text-navy-100"
              >
                Users Status
              </h3>
              <button onclick="toggleModal('modal-background6')"
                class="btn -mr-1.5 h-7 w-7 rounded-full p-0 hover:bg-slate-300/20 focus:bg-slate-300/20 active:bg-slate-300/25 dark:hover:bg-navy-300/20 dark:focus:bg-navy-300/20 dark:active:bg-navy-300/25"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4.5 w-4.5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              </button>
            </div>

            <div class="scrollbar-sm min-w-full overflow-auto">
            <table class="w-full text-left">
                <thead>
                  <tr
                    class="border-y border-transparent border-b-slate-200 dark:border-b-navy-500"
                  >
                    <th
                      class="whitespace-nowrap px-3 py-3 font-semibold uppercase text-slate-800 dark:text-navy-100 lg:px-5"
                    >
                      Diagnostic Type
                    </th>
                    <th
                      class="whitespace-nowrap px-3 py-3 font-semibold uppercase text-slate-800 dark:text-navy-100 lg:px-5"
                    >
                      Result
                    </th>
                    <th
                      class="whitespace-nowrap px-3 py-3 font-semibold uppercase text-slate-800 dark:text-navy-100 lg:px-5"
                    >
                      Date
                    </th>
                  </tr>
                </thead>
                <tbody id="diagnostics-table-body">


  
                </tbody>
              </table>
            </div>
        </div>



        </div>
    </div>
</div> {% endcomment %}















    
    <script>

        function toggleModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.toggle("hidden");
        }
        
        function outsideClick(event, modalId) {
            const modal = document.getElementById(modalId);
            if (event.target === modal) {
                toggleModal(modalId);
            }
        }

        $(document).ready(function() {
            loadPatients();
            fetchReferrals();
            loadEquipment();
        });


       
        $('#add-patient-form').submit(function(event) {
            event.preventDefault(); 

          
            const patientData = {
                first_name: $('#first_name').val(),
                last_name: $('#last_name').val(),
                dob: $('#dob').val(),
                gender: $('#gender').val(),
                contact_info: $('#contact_info').val()
            };

            $.ajax({
                url: '/shifaa/patients/add/', 
                type: 'POST',
                data: patientData,
                success: function(response) {
                    alert('Patient added successfully');
                    loadPatients();
                },
                error: function(error) {
                    alert('Error adding patient');
                }
            });
        });

        
        function loadPatients() {
            $.ajax({
                url: '/shifaa/patients/',
                type: 'GET',
                success: function(response) {
                    let patientHtml = '';
                    response.patients.forEach(function(patient) {
                        patientHtml += `
                            <tr class="border-y border-transparent border-b-slate-200 dark:border-b-navy-500">
                                <td class="whitespace-nowrap px-3 py-3 font-medium text-slate-700 dark:text-navy-100 lg:px-5">${patient.first_name} ${patient.last_name}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${patient.dob}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${patient.gender}</td>
                                
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5" >

                                    <button onclick="openDiagnoseForm(${patient.id})" 
                                    class="btn rounded-full bg-warning font-medium text-white hover:bg-warning focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                                >
                                    Diagnose
                                </button>
                                </td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">

                                    <button onclick="openReferralForm(${patient.id})" 
                                    class="btn rounded-full bg-warning font-medium text-white hover:bg-warning focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                                >
                                    Refer
                                </button>
                                </td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">

                                    <button onclick="loadDiagnostics(${patient.id})" 
                                    class="diagnostics-btn btn rounded-full bg-primary font-medium text-white hover:bg-primary focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                                >
                                    Diagnostics
                                </button>
                                </td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">

                                    <button onclick="loadMedicals(${patient.id})"
                                    class="btn rounded-full bg-primary font-medium text-white hover:bg-primary focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                                >
                                    View
                                </button>
                                </td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">
                                    <div class="inline-flex" >
                                    


                                        <button onclick="toggleModal('modal-background2'); editPatient(${patient.id}, '${patient.first_name}', '${patient.last_name}', '${patient.dob}', '${patient.gender}', '${patient.contact_info}');" class="btn h-9 w-9 p-0 font-medium text-primary hover:bg-primary/20 focus:bg-primary/20 active:bg-primary/25">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M11 5h2m0 0l7 7-2 2-7-7m0 0V5M5 21l-1-4 4 1 11-11-4-4-11 11z"
                                                />
                                            </svg>
                                        </button>

                                        <button onclick="deletePatient(${patient.id})" class="btn h-9 w-9 p-0 font-medium text-error hover:bg-error/20 focus:bg-error/20 active:bg-error/25">
                                            <svg  xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                                            />
                                            </svg>
                                            </button>

                                    </div>
                                </td>
                                </tr>
                            `;
                    });
                    $('#patient-list').html(patientHtml);
                },
                error: function(error) {
                    alert('Error loading patients');
                }
            });
        }

        {% comment %} function loadReferrals() {
            $.ajax({
                url: '/shifaa/referrals/',
                type: 'GET',
                success: function(response) {
                    let referralsHtml = '';
                    response.referrals.forEach(function(referrals) {
                        patientHtml += `
                            <p>
                                ${referrals.patient} - FROM: ${referrals.referred_from} - To: ${referrals.referred_to} - Status: ${referrals.status}
                                <button onclick="deletePatient(${referral.id})">Delete</button>
                            </p>`;
                    });
                    $('#referrals-list').html(referralsHtml);
                },
                error: function(error) {
                    alert('Error loading referrals');
                }
            });

        } {% endcomment %}



        
        $('#view-referrals-btn').click(function() {
            fetchReferrals();
        });

       
        function fetchReferrals() {
            $.ajax({
                url: '/shifaa/referrals/',
                type: 'GET',
                success: function(response) {
                    const referrals = response.referrals;
                    const referralsTable = $('#referrals-table tbody');
                    referralsTable.empty(); 
                    
                    
                    $('#referrals-table').show();

                    referrals.forEach(referral => {
                        let row = `
                            <tr class="border-y border-transparent border-b-slate-200 dark:border-b-navy-500">
                                <td class="whitespace-nowrap px-3 py-3 font-medium text-slate-700 dark:text-navy-100 lg:px-5">${referral.patient_name}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${referral.referred_from_name}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${referral.referred_to_name}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${referral.referral_reason}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${referral.referral_date}</td>
                        `;

                       
                        if (referral.referred_to === 2 && referral.status === "Pending") {
                            row += `
                                <td data-id="${referral.id}" class="whitespace-nowrap px-4 py-3 sm:px-5">

                                    <button data-id="${referral.id}" 
                                    class="accept-btn btn rounded-full bg-warning font-medium text-white hover:bg-warning focus:bg-primary-focus active:bg-primary-focus/90 dark:bg-accent dark:hover:bg-accent-focus dark:focus:bg-accent-focus dark:active:bg-accent/90"
                                >
                                    Accept
                                </button>
                                </td>`;
                        } else {
                            row += `<td class="whitespace-nowrap px-4 py-3 sm:px-5">${referral.status}</td>`;
                        }

                        row += '</tr>';
                        referralsTable.append(row);
                    });
                },
                error: function(xhr, status, error) {
                    console.error("Error fetching referrals:", error);
                }
            });
        }

        // Accept referral when the Accept button is clicked
        $('#referrals-table').on('click', '.accept-btn', function() {
            const referralId = $(this).data('id');

            $.ajax({
                url: `/shifaa/referrals/update/${referralId}/`,
                type: 'POST',
                success: function(response) {
                    if (response.status === 'success') {
                        alert(response.message);
                        fetchReferrals();  // Refresh the table after updating
                    } else {
                        alert("Error: " + response.message);
                    }
                },
                error: function(xhr, status, error) {
                    console.error("Error updating referral:", error);
                }
            });
        });


        // Edit patient
        function editPatient(id, firstName, lastName, dob, gender, contactInfo) {
            $('#update_patient_id').val(id);
            $('#update_first_name').val(firstName);
            $('#update_last_name').val(lastName);
            $('#update_dob').val(dob);
            $('#update_gender').val(gender);
            $('#update_contact_info').val(contactInfo);
            $('#update-patient-section').show();
        }

        // Update patient
        $('#update-patient-form').submit(function(event) {
            event.preventDefault();
            const patientId = $('#update_patient_id').val();
            const patientData = {
                first_name: $('#update_first_name').val(),
                last_name: $('#update_last_name').val(),
                dob: $('#update_dob').val(),
                gender: $('#update_gender').val(),
                contact_info: $('#update_contact_info').val(),
            };

            $.ajax({
                url: `/shifaa/patients/update/${patientId}/`,
                type: 'POST',
                data: patientData,
                success: function(response) {
                    alert('Patient updated successfully');
                    loadPatients();
                },
                error: function(error) {
                    alert('Error updating patient');
                }
            });
        });

        // Delete patient
        function deletePatient(id) {
            if (confirm('Are you sure you want to delete this patient?')) {
                $.ajax({
                    url: `/shifaa/patients/delete/${id}/`,
                    type: 'POST',
                    success: function(response) {
                        alert('Patient deleted successfully');
                        loadPatients();
                    },
                    error: function(error) {
                        alert('Error deleting patient');
                    }
                });
            }
        }


        // Search patient by ID
        function searchPatient() {
            const patientId = $('#search_patient_id').val();
    
            $.ajax({
                url: `/shifaa/patients/${patientId}/`,
                type: 'GET',
                success: function(response) {
                    if (response.status === 'success') {
                        const patient = response.patient;
                        const resultHtml = `<p>${patient.first_name} ${patient.last_name} - ${patient.dob} - ${patient.gender} - ${patient.contact_info}</p>`;
                        $('#search-patient-result').html(resultHtml);
                    } else {
                        $('#search-patient-result').html(`<p>${response.message}</p>`);
                    }
                },
                error: function(error) {
                    $('#search-patient-result').html('<p>Error fetching patient. Please try again.</p>');
                }
            });
        }



        function loadDiagnostics(patientId) {
            $.ajax({
                url: `/shifaa/patients/${patientId}/diagnostic/`,
                type: 'GET',
                success: function(response) {
                    let diagnosticsHtml = '';
                    response.diagnostics.forEach(function(diagnostic) {
                        diagnosticsHtml += `
                            <tr class="border-y border-transparent border-b-slate-200 dark:border-b-navy-500">
                                <td class="whitespace-nowrap px-3 py-3 font-medium text-slate-700 dark:text-navy-100 lg:px-5">${diagnostic.diagnostic_type}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${diagnostic.result}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${diagnostic.date_taken}</td>
                            </tr>
                        `;
                    });
                    $('#diagnostics-body').html(diagnosticsHtml);
                    toggleModal('modal-background6');
                },
                error: function(error) {
                    alert('Error loading diagnostics');
                }
            });
        } 


        function loadMedicals(patientId) {
            $.ajax({
                url: `/shifaa/patients/${patientId}/medicals/`,
                type: 'GET',
                success: function(response) {
                    let diagnosticsHtml = '';
                    response.medicals.forEach(function(medical) {
                        diagnosticsHtml += `
                            <tr class="border-y border-transparent border-b-slate-200 dark:border-b-navy-500">
                                <td class="whitespace-nowrap px-3 py-3 font-medium text-slate-700 dark:text-navy-100 lg:px-5">${medical.condition}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${medical.treatment}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${medical.start_date}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${medical.end_date}</td>
                            </tr>
                        `;
                    });
                    $('#medicals-body').html(diagnosticsHtml);
                    toggleModal('modal-background7');
                },
                error: function(error) {
                    alert('Error loading diagnostics');
                }
            });
        } 


    
        function loadEquipment() {
            $.ajax({
                url: '/shifaa/equipment/',
                type: 'GET',
                success: function(response) {
                    let equipmentHtml = '';
                    response.equipment.forEach(function(equipment) {
                        equipmentHtml += `
                            
                            <tr class="border-y border-transparent border-b-slate-200 dark:border-b-navy-500">
                                <td class="whitespace-nowrap px-3 py-3 font-medium text-slate-700 dark:text-navy-100 lg:px-5">${equipment.equipment_name}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">${equipment.description}</td>
                                <td class="whitespace-nowrap px-4 py-3 sm:px-5">
                                    <div class="inline-flex" >

                                        <button onclick="toggleModal('modal-background3'); editEquipment(${equipment.id}, '${equipment.equipment_name}', '${equipment.description}', ${equipment.available});" class="btn h-9 w-9 p-0 font-medium text-primary hover:bg-primary/20 focus:bg-primary/20 active:bg-primary/25">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M11 5h2m0 0l7 7-2 2-7-7m0 0V5M5 21l-1-4 4 1 11-11-4-4-11 11z"
                                                />
                                            </svg>
                                        </button>

                                        <button onclick="deleteEquipment(${equipment.id})" class="btn h-9 w-9 p-0 font-medium text-error hover:bg-error/20 focus:bg-error/20 active:bg-error/25">
                                            <svg  xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                                            />
                                            </svg>
                                            </button>

                                    </div>
                                </td>
                                </tr>`;
                    });
                    $('#equipment-list').html(equipmentHtml);
                },
                error: function(error) {
                    alert('Error loading equipment');
                }
            });
        }

        // Add new equipment
        $('#add-equipment-form').submit(function(event) {
            event.preventDefault();
            const equipmentData = {
                equipment_name: $('#equipment_name').val(),
                description: $('#description').val(),
                available: $('#available').val(),
            };

            $.ajax({
                url: '/shifaa/equipment/add/',
                type: 'POST',
                data: equipmentData,
                success: function(response) {
                    alert('Equipment added successfully');
                    loadEquipment();
                },
                error: function(error) {
                    alert('Error adding equipment');
                }
            });
        });

        // Edit equipment
        function editEquipment(id, name, description, available) {
            $('#update_equipment_id').val(id);
            $('#update_equipment_name').val(name);
            $('#update_description').val(description);
            $('#update_available').val(available ? 'true' : 'false');
            $('#update-equipment-section').show();
        }

        // Update equipment
        $('#update-equipment-form').submit(function(event) {
            event.preventDefault();
            const equipmentId = $('#update_equipment_id').val();
            const equipmentData = {
                equipment_name: $('#update_equipment_name').val(),
                description: $('#update_description').val(),
                available: $('#update_available').val(),
            };

            $.ajax({
                url: `/shifaa/equipment/update/${equipmentId}/`,
                type: 'POST',
                data: equipmentData,
                success: function(response) {
                    alert('Equipment updated successfully');
                    loadEquipment();
                    $('#update-equipment-section').hide();
                },
                error: function(error) {
                    alert('Error updating equipment');
                }
            });
        });

        // Delete equipment
        function deleteEquipment(id) {
            if (confirm('Are you sure you want to delete this equipment?')) {
                $.ajax({
                    url: `/shifaa/equipment/delete/${id}/`,
                    type: 'POST',
                    success: function(response) {
                        alert('Equipment deleted successfully');
                        loadEquipment();
                    },
                    error: function(error) {
                        alert('Error deleting equipment');
                    }
                });
            }
        }


        // Open Diagnose Form
        function openDiagnoseForm(patientId) {
            $('#diagnose_patient_id').val(patientId);
            toggleModal('modal-background5');
        }

        // Handle Diagnose Form Submission
        $('#diagnose-form').submit(function(event) {
            event.preventDefault();
            const patientID = $('#diagnose_patient_id').val();
            const diagnosticData = {
                diagnostic_type: $('#diagnostic_type').val(),
                result: $('#diagnostic_result').val(),
                date_taken: $('#diagnostic_date_taken').val(),
                notes: $('#diagnostic_notes').val(),
            };

            $.ajax({
                url: `/shifaa/patients/${patientID}/diagnostic/add/`,
                type: 'POST',
                data: diagnosticData,
                success: function(response) {
                    alert('Diagnostic added successfully');
                },
                error: function(error) {
                    alert('Error adding diagnostic');
                }
            });
        });

        // Open Referral Form
        function openReferralForm(patientId) {
            $('#referral_patient_id').val(patientId);
            toggleModal('modal-background4');
        }

        // Handle Referral Form Submission
        $('#referral-form').submit(function(event) {
            event.preventDefault();
            const patientID = $('#referral_patient_id').val();
            const referralData = {
                referred_from: 2,
                referred_to: $('#referred_to').val(),
                referral_reason: $('#referral_reason').val(),
                referral_date: $('#referral_date').val(),
                status: 'Pending', 
            };

            $.ajax({
                url: `/shifaa/patients/${patientID}/referral/add/`,
                type: 'POST',
                data: referralData,
                success: function(response) {
                    alert('Referral added successfully');
                },
                error: function(error) {
                    alert('Error adding referral');
                }
            });
        });

        // Open Medical History Form
        function openMedicalHistoryForm(patientId) {
            $('#medical_history_patient_id').val(patientId);
            
        }

        // Handle Medical History Form Submission
        $('#medical-history-form').submit(function(event) {
            event.preventDefault();
            const patientID = $('#medical_history_patient_id').val();
            const medicalHistoryData = {
                condition: $('#condition').val(),
                treatment: $('#treatment').val(),
                start_date: $('#start_date').val(),
                end_date: $('#end_date').val(),
                notes: $('#medical_history_notes').val(),
            };

            $.ajax({
                url: `/shifaa/patients/${patientID}/history/add/`,
                type: 'POST',
                data: medicalHistoryData,
                success: function(response) {
                    alert('Medical history added successfully');
                    $('#medical-history-form-section').hide();  // Hide the form after success
                },
                error: function(error) {
                    alert('Error adding medical history');
                }
            });
        });


    </script>


{% endblock content %}


{% block javascript %}


{% endblock javascript %}
